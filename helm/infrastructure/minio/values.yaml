# MinIO Infrastructure Chart Values
# This chart deploys MinIO operator + MinIO tenant
# Override with: helm install -f ../../config/config.yaml

# Global settings
global:
  namespace: minio-tenant

# MinIO Operator configuration (subchart)
operator:
  enabled: true
  # MinIO operator will be installed in minio-operator namespace

# MinIO Tenant configuration
tenant:
  enabled: true
  name: minio-single
  namespace: minio-tenant

# MinIO configuration
# Override these with config/config.yaml: helm install -f config/config.yaml
minio:
  # Minikube IP for ingress hosts (will be overridden by config.yaml)
  minikube_ip: "192.168.49.2"

  # Root credentials (will be overridden by config.yaml)
  rootUser: "minio"
  rootPassword: "minio123"

  # Access credentials (same as root for simple setup)
  accessKey: "minio"
  secretKey: "minio123"

  # Storage configuration (will be overridden by config.yaml)
  storage:
    size: 100Gi
    storageClassName: local-storage
    reclaimPolicy: Retain

    # Local volume configuration for Minikube
    local:
      enabled: true
      path: /mnt/minio
      nodeName: minikube  # Override for different minikube profile

  # Tenant pool configuration
  pools:
    - name: pool-0
      servers: 1
      volumesPerServer: 1
      size: 100Gi
      storageClassName: local-storage

  # Browser/Console (will be overridden by config.yaml)
  browser: "on"

  # Request auto cert (TLS)
  requestAutoCert: false

  # Mount path
  mountPath: /data

# Storage Class configuration
storageClass:
  create: true
  name: local-storage
  provisioner: kubernetes.io/no-provisioner
  volumeBindingMode: WaitForFirstConsumer

# Persistent Volume configuration
persistentVolume:
  create: true
  name: minio-pv1
  capacity: 100Gi
  accessModes:
    - ReadWriteOnce
  reclaimPolicy: Retain

# Ingress configuration (optional)
# Enable this to access MinIO via ingress (requires nginx ingress controller)
# minikube addons enable ingress
# Hosts will be dynamically generated using .Values.minio.minikube_ip in templates
ingress:
  enabled: true
  api:
    # host will be: minio-api.{minikube_ip}.nip.io (generated in template)
    annotations:
      nginx.ingress.kubernetes.io/proxy-body-size: "100m"
  console:
    # host will be: minio.{minikube_ip}.nip.io (generated in template)
